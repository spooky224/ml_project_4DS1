"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[284],{27556:function(e,t,n){n.d(t,{YQ:function(){return a},d7:function(){return i}});var r=n(46709);function a(e,t,n){var a=this,o=(0,r.useRef)(null),i=(0,r.useRef)(0),s=(0,r.useRef)(null),l=(0,r.useRef)([]),d=(0,r.useRef)(),c=(0,r.useRef)(),u=(0,r.useRef)(e),m=(0,r.useRef)(!0);u.current=e;var h="undefined"!=typeof window,f=!t&&0!==t&&h;if("function"!=typeof e)throw new TypeError("Expected a function");t=+t||0;var g=!!(n=n||{}).leading,p=!("trailing"in n)||!!n.trailing,v="maxWait"in n,x="debounceOnServer"in n&&!!n.debounceOnServer,w=v?Math.max(+n.maxWait||0,t):null;(0,r.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var b=(0,r.useMemo)((function(){var e=function(e){var t=l.current,n=d.current;return l.current=d.current=null,i.current=e,c.current=u.current.apply(n,t)},n=function(e,t){f&&cancelAnimationFrame(s.current),s.current=f?requestAnimationFrame(e):setTimeout(e,t)},r=function(e){if(!m.current)return!1;var n=e-o.current;return!o.current||n>=t||n<0||v&&e-i.current>=w},b=function(t){return s.current=null,p&&l.current?e(t):(l.current=d.current=null,c.current)},y=function e(){var a=Date.now();if(r(a))return b(a);if(m.current){var s=t-(a-o.current),l=v?Math.min(s,w-(a-i.current)):s;n(e,l)}},Y=function(){if(h||x){var u=Date.now(),f=r(u);if(l.current=[].slice.call(arguments),d.current=a,o.current=u,f){if(!s.current&&m.current)return i.current=o.current,n(y,t),g?e(o.current):c.current;if(v)return n(y,t),e(o.current)}return s.current||n(y,t),c.current}};return Y.cancel=function(){s.current&&(f?cancelAnimationFrame(s.current):clearTimeout(s.current)),i.current=0,l.current=o.current=d.current=s.current=null},Y.isPending=function(){return!!s.current},Y.flush=function(){return s.current?b(Date.now()):c.current},Y}),[g,v,t,w,p,f,h,x]);return b}function o(e,t){return e===t}function i(e,t,n){var i=n&&n.equalityFn||o,s=(0,r.useRef)(e),l=(0,r.useState)({})[1],d=a((0,r.useCallback)((function(e){s.current=e,l({})}),[l]),t,n),c=(0,r.useRef)(e);return i(c.current,e)||(d(e),c.current=e),[s.current,d]}},29774:function(e,t,n){n.d(t,{Au:function(){return s},tF:function(){return l}});var r=n(46709),a=n(36476),o=n(73408);const i=(0,r.createContext)({currentUserActionError:null,handleError:()=>{},handlePromise:()=>{},clearUserActionError:()=>{}}),s=({children:e,errorFilter:t})=>{const[n,s]=(0,r.useState)(null),l=(0,r.useCallback)(((e,n)=>{if(null===t||void 0===t||!t(e)){const t=(0,a.a$)(e);s(t),n&&n(t)}}),[s,t]),d=(0,r.useCallback)((e=>{e.catch((e=>{l(e)}))}),[l]),c=(0,r.useCallback)((()=>{s(null)}),[s]);return(0,o.Y)(i.Provider,{value:(0,r.useMemo)((()=>({currentUserActionError:n,handleError:l,handlePromise:d,clearUserActionError:c})),[c,n,l,d]),children:e})},l=()=>{const{currentUserActionError:e,handleError:t,handlePromise:n,clearUserActionError:a}=(0,r.useContext)(i),o=(0,r.useCallback)(((e,n,r)=>{t(n,r)}),[t]);return(0,r.useMemo)((()=>({currentUserActionError:e,handleError:t,handleErrorWithEvent:o,handlePromise:n,clearUserActionError:a})),[a,t,n,e,o])}},32874:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(27757),a=n(74060),o=n(46709),i=n(40724),s=n(79081),l=n(66916),d=n(42747),c=n(61077),u=n(39595),m=n(61060),h=n(34599);var f=n(73408);const g=({visible:e,experimentId:t,onCancel:n})=>{const r=(0,d.tz)(),[i,g]=(0,o.useState)(""),[p,v]=(0,o.useState)(""),{createEvaluationDatasetMutation:x,isLoading:w}=(({onSuccess:e,onError:t})=>{const n=(0,u.jE)(),{mutate:r,isLoading:a}=(0,m.n)({mutationFn:async({datasetName:e,experimentIds:t})=>{const n={name:e,experiment_ids:t};return(await(0,c.ff)((0,c.we)("ajax-api/3.0/mlflow/datasets/create"),"POST",n)).dataset},onSuccess:()=>{n.invalidateQueries({queryKey:[h.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{createEvaluationDatasetMutation:r,isLoading:a}})({onSuccess:()=>{n()}}),b=(0,o.useCallback)((()=>{i?x({datasetName:i,experimentIds:[t]}):v(r.formatMessage({id:"sbHChH",defaultMessage:"Dataset name is required"}))}),[x,t,i,r]);return(0,f.FD)(s.d,{componentId:"mlflow.create-evaluation-dataset-modal",visible:e,onCancel:n,okText:r.formatMessage({id:"creoEe",defaultMessage:"Create"}),cancelText:r.formatMessage({id:"nEnDEu",defaultMessage:"Cancel"}),onOk:b,okButtonProps:{loading:w,disabled:!i},title:(0,f.Y)(d.sA,{id:"287Ack",defaultMessage:"Create evaluation dataset"}),children:[(0,f.Y)(a.FormUI.Label,{htmlFor:"dataset-name-input",children:(0,f.Y)(d.sA,{id:"xdFMIN",defaultMessage:"Dataset name"})}),(0,f.Y)(l.I,{componentId:"mlflow.create-evaluation-dataset-modal.dataset-name",id:"dataset-name-input",name:"name",type:"text",placeholder:r.formatMessage({id:"ZQpc2w",defaultMessage:"Enter dataset name"}),value:i,onChange:e=>{g(e.target.value),v("")}}),p&&(0,f.Y)(a.FormUI.Message,{type:"error",message:p})]})};var p={name:"b9l38d",styles:"width:min-content"};const v=({experimentId:e})=>{const[t,n]=(0,o.useState)(!1);return(0,f.FD)(f.FK,{children:[(0,f.Y)(r.B,{componentId:"mlflow.eval-datasets.create-dataset-button",css:p,icon:(0,f.Y)(a.DatabaseIcon,{}),onClick:()=>n(!0),children:(0,f.Y)(i.A,{id:"N7BCue",defaultMessage:"Create dataset"})}),(0,f.Y)(g,{experimentId:e,visible:t,onCancel:()=>n(!1)})]})}},34599:function(e,t,n){n.d(t,{P4:function(){return a},lA:function(){return o},uz:function(){return r}});const r="GET_DATASET_RECORDS",a="SEARCH_EVALUATION_DATASETS",o="FETCH_TRACES"},42595:function(e,t,n){n.d(t,{t:function(){return u},z:function(){return m}});var r=n(68248),a=n(27757),o=n(46709),i=n(25637),s=n(52572),l=n(73408);var d={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},c={name:"5ob2ly",styles:"display:flex;position:relative"};const u=({runListHidden:e,width:t,onResize:n,children:a,onHiddenChange:u,maxWidth:h})=>{const f=(0,s.e)(),[g,p]=(0,o.useState)(!1);return(0,l.FD)(l.FK,{children:[(0,l.Y)(i.ResizableBox,{css:c,style:{flex:`0 0 ${e?0:t}px`},width:t,axis:"x",resizeHandles:["e"],minConstraints:[250,0],maxConstraints:void 0===h?void 0:[h,0],handle:(0,l.Y)(m,{runListHidden:e,updateRunListHidden:e=>{u?u(e):f((t=>({...t,runListHidden:e})))}}),onResize:(t,{size:r})=>{e||n(r.width)},onResizeStart:()=>!e&&p(!0),onResizeStop:()=>p(!1),children:a}),g&&(0,l.Y)(r.mL,{styles:d})]})},m=o.forwardRef((({updateRunListHidden:e,runListHidden:t,...n},o)=>{const{theme:i}=(0,a.u)();return(0,l.FD)("div",{ref:o,...n,css:(0,r.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:t?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${i.colors.actionDefaultBorderHover}`}}},""),children:[(0,l.Y)("div",{css:(0,r.AH)({position:"absolute",left:-i.general.iconSize/2,width:i.general.iconSize,cursor:t?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,l.Y)("div",{className:"button",css:(0,r.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:i.general.iconSize,height:i.general.iconSize,backgroundColor:i.colors.backgroundPrimary,borderRadius:i.general.iconSize,overflow:"hidden",border:`1px solid ${i.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,l.Y)(a.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>e(!t),icon:t?(0,l.Y)(a.o,{}):(0,l.Y)(a.n,{}),size:"small"})})}),(0,l.Y)("div",{className:"bar",css:(0,r.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:i.colors.actionPrimaryBackgroundDefault},"")})]})}))},52572:function(e,t,n){n.d(t,{e:function(){return s},i:function(){return i}});var r=n(46709),a=n(73408);const o=r.createContext((e=>e)),i=({children:e,setUIState:t})=>(0,a.Y)(o.Provider,{value:t,children:e}),s=()=>r.useContext(o)},52849:function(e,t,n){n.d(t,{v:function(){return a}});var r=n(46709);const a=({isFetching:e,hasNextPage:t,fetchNextPage:n})=>(0,r.useCallback)((r=>{if(r){const{scrollHeight:a,scrollTop:o,clientHeight:i}=r;a-o-i<200&&!e&&t&&n()}}),[n,e,t])},59930:function(e){e.exports=function(e,t,n,r,a,o,i,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[n,r,a,o,i,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return d[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},72607:function(e,t,n){n.d(t,{J:function(){return s}});var r=n(96584),a=n(61077),o=n(46709),i=n(34599);const s=({experimentId:e,enabled:t=!0,nameFilter:n=""})=>{const{data:s,fetchNextPage:l,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:h}=(0,r.q)({queryKey:[i.P4,e,n],queryFn:async({queryKey:[,e,t],pageParam:n})=>{const r={experiment_ids:[e],filter_string:t?`name ILIKE '%${t}%'`:void 0,order_by:["created_time DESC"],max_results:50,page_token:n};return await(0,a.ff)((0,a.we)("ajax-api/3.0/mlflow/datasets/search"),"POST",r)},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,o.useMemo)((()=>{var e;return null!==(e=null===s||void 0===s?void 0:s.pages.flatMap((e=>{var t;return null!==(t=e.datasets)&&void 0!==t?t:[]})))&&void 0!==e?e:[]}),[s]),fetchNextPage:l,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:h}}},72801:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.useClipboard=void 0;var a=r(n(90606)),o=n(46709),i=n(81619);function s(e){return e&&("TEXTAREA"===e.nodeName||"INPUT"===e.nodeName)}t.useClipboard=function(e){void 0===e&&(e={});var t=i.useTimedToggle(!1),n=t[0],r=t[1],l=o.useRef(null),d=o.useRef(e);return d.current=e,{copied:n,copy:o.useCallback((function(e){var t=d.current,n=l.current;function o(){t.onSuccess&&t.onSuccess(),t.copiedTimeout&&r(t.copiedTimeout),t.selectOnCopy&&s(n)&&n.select()}function i(){t.onError&&t.onError(),!1!==t.selectOnError&&s(n)&&n.select()}function c(e){a.default(e).then(o).catch(i)}"string"===typeof e?c(e):n&&c(n.value)}),[]),isSupported:function(){return!!navigator.clipboard||"function"===typeof document.execCommand&&"function"===typeof document.queryCommandSupported&&document.queryCommandSupported("copy")},target:l}}},86841:function(e,t,n){n.r(t),n.d(t,{default:function(){return pe}});var r=n(68248),a=n(27757),o=n(25637),i=n(42595),s=n(46709),l=n(91105),d=n(59930),c=n.n(d),u=n(74060),m=n(66916),h=n(42747),f=n(43617),g=n(90061),p=n(72607),v=n(73408);var x={name:"y1ecum",styles:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex-shrink:1"};var w=n(79081),b=n(87879);var y=n(40724),Y=n(34599),D=n(61077),S=n(39595),C=n(61060);var I={name:"1hcx8jb",styles:"padding:0"},M={name:"1r962iv",styles:"padding:4px"};var R=n(76118),T=n(52849),P=n(32874);const z="name",A="last_update_time",_="actions",F=[z,A,_],E=[_],k=[{id:z,accessorKey:"name",header:"Name",enableSorting:!0,cell:({row:e})=>{const{theme:t}=(0,a.u)();return(0,v.Y)("div",{css:(0,r.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:t.spacing.xs},""),children:(0,v.Y)(a.T.Link,{css:x,componentId:"mlflow.eval-datasets.dataset-name-cell",children:e.original.name})})}},{id:A,accessorKey:"last_update_time",accessorFn:e=>e.last_update_time?new Date(e.last_update_time).getTime():0,header:"Updated At",enableSorting:!0,size:100,maxSize:100,cell:({row:e})=>e.original.last_update_time?(0,v.Y)(w.T,{content:new Date(e.original.last_update_time).toLocaleString(),componentId:"mlflow.eval-datasets.last-updated-cell-tooltip",children:(0,v.Y)("span",{children:(0,b.Pt)(e.original.last_update_time)})}):(0,v.Y)("span",{children:"-"})},{id:"created_time",accessorKey:"created_time",accessorFn:e=>e.created_time?new Date(e.created_time).getTime():0,header:"Created At",enableSorting:!0,cell:({row:e})=>new Date(e.original.created_time).toLocaleString()},{id:"created_by",accessorKey:"created_by",header:"Created By",enableSorting:!0},{id:"source_type",accessorKey:"source_type",header:"Source Type",enableSorting:!0},{id:"actions",header:"",enableSorting:!1,size:36,maxSize:36,cell:({row:e})=>{const t=(0,S.jE)(),{deleteEvaluationDatasetMutation:n,isLoading:r}=(({onSuccess:e,onError:t})=>{const n=(0,S.jE)(),{mutate:r,isLoading:a}=(0,C.n)({mutationFn:async({datasetId:e})=>{await(0,D.ff)((0,D.we)(`ajax-api/3.0/mlflow/datasets/${e}`),"DELETE")},onSuccess:()=>{n.invalidateQueries({queryKey:[Y.P4]}),null===e||void 0===e||e()},onError:e=>{null===t||void 0===t||t(e)}});return{deleteEvaluationDatasetMutation:r,isLoading:a}})({onSuccess:()=>{t.invalidateQueries({queryKey:[Y.P4]})}}),o=(0,s.useCallback)((()=>{n({datasetId:e.original.dataset_id})}),[n,e]);return(0,v.Y)(u.TableRowAction,{css:I,children:(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.dataset-actions-menu",size:"small",icon:(0,v.Y)(u.OverflowIcon,{}),"aria-label":"Dataset actions",css:M})}),(0,v.Y)(u.DropdownMenu.Content,{align:"end",children:(0,v.FD)(u.DropdownMenu.Item,{componentId:"mlflow.eval-datasets.delete-dataset-menu-option",disabled:r,onClick:e=>{e.stopPropagation(),e.preventDefault(),o()},children:[(0,v.Y)(u.DropdownMenu.IconWrapper,{children:(0,v.Y)(u.TrashIcon,{})}),(0,v.Y)(y.A,{id:"cMRvTA",defaultMessage:"Delete dataset"}),r&&(0,v.Y)(u.DropdownMenu.HintColumn,{children:(0,v.Y)(a.S,{})})]})})]})})}}],H=s.memo((({row:e,isActive:t,setSelectedDataset:n})=>{const{theme:o}=(0,a.u)();return(0,v.Y)(u.TableRow,{className:"eval-datasets-table-row",onClick:()=>{n(e.original)},children:e.getVisibleCells().map((e=>(0,v.Y)(u.TableCell,{css:(0,r.AH)({backgroundColor:t?o.colors.actionDefaultBackgroundHover:"transparent",width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",..."actions"===e.column.id&&{paddingLeft:0,paddingRight:0}},""),children:(0,f.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)}),((e,t)=>e.isActive===t.isActive&&(0,R.isEqual)(e.columnVisibility,t.columnVisibility)));var N={name:"10jtkcq",styles:"display:flex;flex-direction:column;width:100%;height:100%"},L={name:"82a6rk",styles:"flex:1"},K={name:"1jrb16",styles:"flex:1;min-height:0;position:relative"},O={name:"13udsys",styles:"height:100%"};const $=({experimentId:e,selectedDataset:t,setSelectedDataset:n,setIsLoading:o})=>{const i=(0,h.tz)(),{theme:l}=(0,a.u)(),[d,c]=(0,s.useState)([{id:"created_time",desc:!0}]),[x,w]=(0,s.useState)(k.reduce(((e,t)=>{var n,r;return e[null!==(n=t.id)&&void 0!==n?n:""]=F.includes(null!==(r=t.id)&&void 0!==r?r:""),e}),{})),[b,y]=(0,s.useState)(""),[Y,D]=(0,s.useState)(b),{data:S,isLoading:C,isFetching:I,error:M,refetch:R,fetchNextPage:z,hasNextPage:A}=(0,p.J)({experimentId:e,nameFilter:b}),_=(0,f.N4)({columns:k,data:null!==S&&void 0!==S?S:[],getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_id,enableSorting:!0,onSortingChange:c,getSortedRowModel:(0,g.h5)(),enableColumnResizing:!1,state:{sorting:d,columnVisibility:x}}),$=(0,T.v)({isFetching:I,hasNextPage:null!==A&&void 0!==A&&A,fetchNextPage:z});if((0,s.useEffect)((()=>{o(C)}),[C,o]),null!==S&&void 0!==S&&S.length||n(void 0),!t||!S.some((e=>e.dataset_id===t.dataset_id))){const e=_.getRowModel().rows;e.length>0&&n(e[0].original)}return M?(0,v.Y)("div",{children:"Error loading datasets"}):(0,v.FD)("div",{css:N,children:[(0,v.FD)("div",{css:(0,r.AH)({display:"flex",gap:l.spacing.sm,alignItems:"center",marginBottom:l.spacing.sm},""),children:[(0,v.Y)(m.I,{allowClear:!0,placeholder:"Search by dataset name",value:Y,onChange:e=>{D(e.target.value),e.target.value||y(e.target.value)},onClear:()=>{D(""),y("")},onPressEnter:()=>y(Y),componentId:"mlflow.eval-datasets.search-input",css:L,prefix:(0,v.Y)(m.S,{})}),(0,v.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",marginRight:l.spacing.sm},""),children:[(0,v.Y)(a.B,{icon:(0,v.Y)(u.RefreshIcon,{}),disabled:I,onClick:()=>R(),componentId:"mlflow.eval-datasets.table-refresh-button"}),(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{icon:(0,v.Y)(u.ColumnsIcon,{}),componentId:"mlflow.eval-datasets.table-column-selector-button"})}),(0,v.Y)(u.DropdownMenu.Content,{children:k.map((e=>{var t,n,r,o;return!E.includes(null!==(t=e.id)&&void 0!==t?t:"")&&(0,v.FD)(u.DropdownMenu.CheckboxItem,{componentId:"mlflow.eval-datasets.table-column-selector-checkbox",checked:null!==(r=x[null!==(o=e.id)&&void 0!==o?o:""])&&void 0!==r&&r,onCheckedChange:t=>{var n;return w({...x,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:e.header})]},null!==(n=e.id)&&void 0!==n?n:"")}))})]})]})]}),(0,v.Y)(P.Z,{experimentId:e}),(0,v.Y)("div",{css:K,children:(0,v.FD)(u.Table,{css:O,empty:C||I||0!==S.length?void 0:(0,v.Y)(u.Empty,{description:i.formatMessage({id:"F4K195",defaultMessage:"No evaluation datasets found"})}),onScroll:e=>$(e.currentTarget),scrollable:!0,children:[(0,v.Y)(u.TableRow,{isHeader:!0,children:_.getLeafHeaders().map((e=>(0,v.Y)(u.TableHeader,{sortable:e.column.getCanSort(),sortDirection:e.column.getIsSorted(),onToggleSort:e.column.getToggleSortingHandler(),componentId:`mlflow.eval-datasets.${e.column.id}-header`,header:e,column:e.column,css:(0,r.AH)({width:e.column.columnDef.size?`${e.column.columnDef.size}px`:"auto",maxWidth:e.column.columnDef.maxSize?`${e.column.columnDef.maxSize}px`:"auto",minWidth:e.column.columnDef.minSize?`${e.column.columnDef.minSize}px`:"auto",cursor:e.column.getCanSort()?"pointer":"default"},""),children:(0,f.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),!C&&_.getRowModel().rows.map((e=>(0,v.Y)(H,{row:e,columnVisibility:x,isActive:e.original.dataset_id===(null===t||void 0===t?void 0:t.dataset_id),setSelectedDataset:n},e.id))),(C||I)&&(0,v.Y)(u.TableSkeletonRows,{table:_})]})})]})};var q=n(96584),B=n(181);var j=n(7655),U=n(30676);const V=({cell:e,table:{options:t}})=>{var n;const{theme:o}=(0,a.u)(),i=JSON.stringify(e.getValue(),null,2),s=null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.rowSize,l="md"===s?5*o.typography.fontSizeLg:10*o.typography.fontSizeLg;return(0,v.Y)("div",{css:(0,r.AH)({overflow:"hidden",display:"flex",alignItems:"center",gap:o.spacing.xs,flex:1},""),children:"sm"===s?(0,v.Y)("code",{css:(0,r.AH)({overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:`${o.typography.fontSizeSm}px !important`,margin:"0 !important"},""),children:i}):(0,v.Y)(U.z7,{language:"json",style:{padding:o.spacing.xs,border:`1px solid ${o.colors.border}`,height:l,width:"100%"},children:i})})};var W={name:"1o129hd",styles:"display:flex;align-items:flex-start"};const Q=({dataset:e,datasetRecords:t,columns:n,columnVisibility:o,setColumnVisibility:i,rowSize:s,setRowSize:l})=>{const{theme:d}=(0,a.u)(),c=null===e||void 0===e?void 0:e.name,m=(e=>{var t;if(!e)return;const n=(0,B.pt)(e);return null!==(t=null===n||void 0===n?void 0:n.num_records)&&void 0!==t?t:void 0})(null===e||void 0===e?void 0:e.profile),h=t.length;return(0,v.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:d.spacing.sm},""),children:[(0,v.FD)("div",{css:(0,r.AH)({display:"flex",flexDirection:"column",paddingLeft:d.spacing.sm,paddingRight:d.spacing.sm},""),children:[(0,v.Y)(a.T.Title,{level:3,withoutMargins:!0,children:c}),(0,v.Y)(a.T.Text,{color:"secondary",size:"sm",children:(0,v.Y)(y.A,{id:"crmbMK",defaultMessage:"Displaying {loadedRecordsCount} of {totalRecordsCount, plural, =1 {1 record} other {# records}}",values:{loadedRecordsCount:null!==h&&void 0!==h?h:0,totalRecordsCount:null!==m&&void 0!==m?m:0}})})]}),(0,v.FD)("div",{css:W,children:[(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-toggle",icon:(0,v.Y)(u.RowsIcon,{})})}),(0,v.Y)(u.DropdownMenu.Content,{align:"end",children:(0,v.FD)(u.DropdownMenu.RadioGroup,{componentId:"mlflow.eval-datasets.records-toolbar.row-size-radio",value:s,onValueChange:e=>l(e),children:[(0,v.Y)(u.DropdownMenu.Label,{children:(0,v.Y)(a.T.Text,{color:"secondary",children:(0,v.Y)(y.A,{id:"DcGPfO",defaultMessage:"Row height"})})}),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"sm",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"ZNyTjg",defaultMessage:"Small"})})]},"sm"),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"md",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"fcIHyN",defaultMessage:"Medium"})})]},"md"),(0,v.FD)(u.DropdownMenu.RadioItem,{value:"lg",children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:(0,v.Y)(y.A,{id:"xgbeVS",defaultMessage:"Large"})})]},"lg")]})})]}),(0,v.FD)(u.DropdownMenu.Root,{children:[(0,v.Y)(u.DropdownMenu.Trigger,{asChild:!0,children:(0,v.Y)(a.B,{componentId:"mlflow.eval-datasets.records-toolbar.columns-toggle",icon:(0,v.Y)(u.ColumnsIcon,{})})}),(0,v.Y)(u.DropdownMenu.Content,{children:n.map((e=>{var t,n;return(0,v.FD)(u.DropdownMenu.CheckboxItem,{componentId:"YOUR_TRACKING_ID",checked:null!==(t=o[null!==(n=e.id)&&void 0!==n?n:""])&&void 0!==t&&t,onCheckedChange:t=>{var n;return i({...o,[null!==(n=e.id)&&void 0!==n?n:""]:t})},children:[(0,v.Y)(u.DropdownMenu.ItemIndicator,{}),(0,v.Y)(a.T.Text,{children:e.header})]},e.id)}))})]})]})]})};const G="inputs",Z="outputs",J="expectations",X=[{id:G,accessorKey:"inputs",header:"Inputs",enableResizing:!1,cell:V},{id:Z,accessorKey:"outputs",header:"Outputs",enableResizing:!1,cell:V},{id:J,accessorKey:"expectations",header:"Expectations",enableResizing:!1,cell:V}];var ee={name:"1w4ngjc",styles:"flex:1;min-height:0;position:relative;overflow:hidden;display:flex;flex-direction:column"},te={name:"82a6rk",styles:"flex:1"},ne={name:"1w2a2xb",styles:"position:sticky;top:0;z-index:1"};const re=({dataset:e})=>{const t=(0,j.A)(),n=e.dataset_id,[r,a]=(0,s.useState)("sm"),[o,i]=(0,s.useState)({[G]:!0,[Z]:!1,[J]:!0}),{data:l,isLoading:d,isFetching:c,error:m,fetchNextPage:h,hasNextPage:p}=(({datasetId:e,enabled:t=!0})=>{const{data:n,fetchNextPage:r,hasNextPage:a,isLoading:o,isFetching:i,refetch:l,error:d}=(0,q.q)({queryKey:[Y.uz,e],queryFn:async({queryKey:[,e],pageParam:t})=>{const n=new URLSearchParams;return n.set("dataset_id",e),n.set("max_results",50..toString()),t&&n.set("page_token",null!==t&&void 0!==t?t:""),await(0,D.ff)((0,D.we)(`ajax-api/3.0/mlflow/datasets/${e}/records?${n.toString()}`),"GET")},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:t,getNextPageParam:e=>e.next_page_token});return{data:(0,s.useMemo)((()=>{var e;return null!==(e=null===n||void 0===n?void 0:n.pages.flatMap((e=>(0,B.pt)(e.records))))&&void 0!==e?e:[]}),[n]),fetchNextPage:r,hasNextPage:a,isLoading:o,isFetching:i,refetch:l,error:d}})({datasetId:null!==n&&void 0!==n?n:"",enabled:!!n}),x=(0,T.v)({isFetching:c,hasNextPage:null!==p&&void 0!==p&&p,fetchNextPage:h}),w=(0,f.N4)({columns:X,data:null!==l&&void 0!==l?l:[],getCoreRowModel:(0,g.HT)(),getRowId:e=>e.dataset_record_id,enableColumnResizing:!1,meta:{rowSize:r},state:{columnVisibility:o}});return(0,v.FD)("div",{css:ee,children:[(0,v.Y)(Q,{dataset:e,datasetRecords:null!==l&&void 0!==l?l:[],columns:X,columnVisibility:o,setColumnVisibility:i,rowSize:r,setRowSize:a}),(0,v.FD)(u.Table,{css:te,empty:d||0!==w.getRowModel().rows.length?void 0:(0,v.Y)(u.Empty,{description:t.formatMessage({id:"TnD/vL",defaultMessage:"No records found"})}),scrollable:!0,onScroll:e=>x(e.currentTarget),children:[(0,v.Y)(u.TableRow,{isHeader:!0,children:w.getLeafHeaders().map((e=>e.column.getIsVisible()&&(0,v.Y)(u.TableHeader,{componentId:`mlflow.eval-dataset-records.${e.column.id}-header`,header:e,column:e.column,css:ne,children:(0,f.Kv)(e.column.columnDef.header,e.getContext())},e.id)))}),w.getRowModel().rows.map((e=>(0,v.Y)(u.TableRow,{children:e.getVisibleCells().map((e=>(0,v.Y)(u.TableCell,{children:(0,f.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id))),(d||c)&&(0,v.Y)(u.TableSkeletonRows,{table:w})]})]})};var ae=n(29774),oe=n(89949);var ie={name:"1vfb318",styles:"flex:1;display:flex;align-items:center;justify-content:center"};const se=({error:e})=>{var t;return(0,v.Y)(u.PageWrapper,{css:ie,children:(0,v.Y)(u.Empty,{"data-testid":"fallback",title:(0,v.Y)(y.A,{id:"WtUqxc",defaultMessage:"Error"}),description:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:(0,v.Y)(y.A,{id:"9J8zoa",defaultMessage:"An error occurred while rendering this component."}),image:(0,v.Y)(a.k,{})})})},le=({children:e,resetKey:t})=>(0,v.Y)(oe.tH,{FallbackComponent:se,resetKeys:[t],children:(0,v.Y)(ae.Au,{children:e})});var de=n.p+"static/media/eval-datasets-empty.16c4b3426c8a8c4a9defc41bfb653504.svg";var ce={name:"xvginl",styles:"max-width:600px"};const ue=({experimentId:e})=>{const{theme:t}=(0,a.u)();return(0,v.FD)("div",{css:(0,r.AH)({display:"flex",flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",padding:t.spacing.md},""),children:[(0,v.Y)(a.T.Title,{level:3,color:"secondary",children:(0,v.Y)(y.A,{id:"c1jD8u",defaultMessage:"Create an evaluation dataset"})}),(0,v.Y)(a.T.Paragraph,{color:"secondary",css:ce,children:(0,v.Y)(y.A,{id:"BMUd0e",defaultMessage:"Create evaluation datasets in order to iteratively evaluate and improve your app. For example, build a dataset from production traces with negative feedback. {learnMoreLink}",values:{learnMoreLink:(0,v.Y)(a.T.Link,{componentId:"mlflow.eval-datasets.learn-more-link",href:"https://mlflow.org/docs/latest/genai/datasets/",openInNewTab:!0,children:(0,v.Y)(y.A,{id:"izS5yQ",defaultMessage:"Learn more"})})}})}),(0,v.Y)("img",{css:(0,r.AH)({marginBottom:t.spacing.md,maxWidth:"min(100%, 600px)"},""),src:de,alt:"No datasets found"}),(0,v.Y)(P.Z,{experimentId:e})]})};var me={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},he={name:"n56zw6",styles:"display:flex;flex-direction:row;flex:1;min-height:0px"},fe={name:"5ob2ly",styles:"display:flex;position:relative"};const ge=()=>{const{experimentId:e}=(0,l.g)(),{theme:t}=(0,a.u)(),[n,d]=(0,s.useState)(400),[u,m]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)(void 0),[x,w]=(0,s.useState)(!1);return c()(e,"Experiment ID must be defined"),(0,v.FD)("div",{css:he,children:[(0,v.Y)(o.ResizableBox,{css:fe,style:{flex:`0 0 ${h?0:n}px`},width:n,axis:"x",resizeHandles:["e"],minConstraints:[250,0],handle:(0,v.Y)(i.z,{runListHidden:h,updateRunListHidden:()=>{f(!h)}}),onResize:(e,{size:t})=>{h||d(t.width)},onResizeStart:()=>!h&&m(!0),onResizeStop:()=>m(!1),children:(0,v.Y)("div",{css:(0,r.AH)({display:h?"none":"flex",flex:1,minWidth:0},""),children:(0,v.Y)($,{setIsLoading:w,experimentId:e,selectedDataset:g,setSelectedDataset:p})})}),(0,v.FD)("div",{css:(0,r.AH)({flex:1,display:"flex",borderLeft:`1px solid ${t.colors.border}`,minHeight:"0px",overflow:"hidden"},""),children:[!x&&!g&&(0,v.Y)(ue,{experimentId:e}),g&&(0,v.Y)(re,{dataset:g})]}),u&&(0,v.Y)(r.mL,{styles:me})]})};var pe=()=>(0,v.Y)(le,{children:(0,v.Y)(ge,{})})},96584:function(e,t,n){n.d(t,{q:function(){return l}});var r=n(56606),a=n(23403),o=n(60783);class i extends a.${constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:(0,o.PL)()},t)}getOptimisticResult(e){return e.behavior=(0,o.PL)(),super.getOptimisticResult(e)}fetchNextPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"forward",pageParam:e}}})}fetchPreviousPage({pageParam:e,...t}={}){return this.fetch({...t,meta:{fetchMore:{direction:"backward",pageParam:e}}})}createResult(e,t){var n,r,a,i,s,l;const{state:d}=e,c=super.createResult(e,t),{isFetching:u,isRefetching:m}=c,h=u&&"forward"===(null==(n=d.fetchMeta)||null==(r=n.fetchMore)?void 0:r.direction),f=u&&"backward"===(null==(a=d.fetchMeta)||null==(i=a.fetchMore)?void 0:i.direction);return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,o.rB)(t,null==(s=d.data)?void 0:s.pages),hasPreviousPage:(0,o.RQ)(t,null==(l=d.data)?void 0:l.pages),isFetchingNextPage:h,isFetchingPreviousPage:f,isRefetching:m&&!h&&!f}}}var s=n(93769);function l(e,t,n){const a=(0,r.vh)(e,t,n);return(0,s.t)(a,i)}}}]);