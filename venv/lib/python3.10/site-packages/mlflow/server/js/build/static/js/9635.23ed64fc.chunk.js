"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[9635],{19114:function(e,a,t){t.d(a,{c:function(){return I}});var s=t(46709),n=t(68248),o=t(27757),l=t(79081),r=t(66916),i=t(74060),d=t(43617),c=t(90061),u=t(40724),m=t(52849),g=t(72607),p=t(23125),f=t(76118);var h=t(61077),v=t(61060);var y=t(32874),w=t(49708),x=t(69986),_=t(34599);var T=t(73408);const k=[{id:"name",accessorKey:"name",header:"Name"}];var b={name:"tardml",styles:"height:500px;overflow:hidden"},M={name:"82a6rk",styles:"flex:1"};const C=({experimentId:e,visible:a,setVisible:t,selectedTraceInfos:C})=>{const{theme:I}=(0,o.u)(),[S,Y]=(0,s.useState)(""),[A,F]=(0,s.useState)(S),E=C.map((e=>(0,p.getModelTraceId)({info:e,data:{spans:[]}}))),{data:D,isLoading:V}=(({traceIds:e})=>(0,w.I)({queryKey:[_.lA,e],queryFn:async({queryKey:[,e]})=>{const a=(0,f.chunk)(e,20),t=[];for(const s of a){const e=await Promise.all(s.map(x.U));t.push(...e)}return t}}))({traceIds:E}),R=(e=>{const a=e.map((e=>{var a;const t=e.data.spans.find((e=>!(0,p.getModelTraceSpanParentId)(e)));if((0,f.isNil)(t))return null;const s={};if((0,p.isV3ModelTraceInfo)(e.info))for(const l of null!==(n=e.info.assessments)&&void 0!==n?n:[]){var n;if("expectation"in l)if("serialized_value"in l.expectation){const e=l.expectation.serialized_value.value;try{s[l.assessment_name]=JSON.parse(e)}catch(o){s[l.assessment_name]=e}}else s[l.assessment_name]=l.expectation.value}return{inputs:(0,p.isV3ModelTraceSpan)(t)?(0,p.tryDeserializeAttribute)(null===(a=t.attributes)||void 0===a?void 0:a["mlflow.spanInputs"]):t.inputs,expectations:s,source:{source_type:"TRACE",source_data:{trace_id:(0,p.getModelTraceId)(e)}}}}));return(0,f.compact)(a)})((0,f.compact)(D)),{data:P,isLoading:L,isFetching:H,fetchNextPage:K,hasNextPage:N}=(0,g.J)({experimentId:e,nameFilter:S}),q=L||V,B=(0,m.v)({isFetching:H,hasNextPage:null!==N&&void 0!==N&&N,fetchNextPage:K}),O=(0,d.N4)({columns:k,getRowId:e=>e.dataset_id,data:null!==P&&void 0!==P?P:[],getCoreRowModel:(0,c.HT)(),enableColumnResizing:!1}),U=O.getSelectedRowModel().rows.map((e=>e.original)),{upsertDatasetRecordsMutation:z,isLoading:W}=(({onSuccess:e,onError:a})=>{const{mutate:t,isLoading:s}=(0,v.n)({mutationFn:async({datasetId:e,records:a})=>{const t={dataset_id:e,records:a};return await(0,h.ff)((0,h.we)(`ajax-api/3.0/mlflow/datasets/${e}/records`),"POST",t)},onSuccess:()=>{null===e||void 0===e||e()},onError:e=>{null===a||void 0===a||a(e)}});return{upsertDatasetRecordsMutation:t,isLoading:s}})({onSuccess:()=>{t(!1)}}),$=(0,s.useCallback)((()=>{Promise.all(U.map((e=>z({datasetId:e.dataset_id,records:JSON.stringify(R)}))))}),[U,z,R]);return(0,T.Y)(l.d,{componentId:"mlflow.export-traces-to-dataset-modal",visible:a,onCancel:()=>t(!1),okText:(0,T.Y)(u.A,{id:"a1liZ7",defaultMessage:"Export"}),okButtonProps:{disabled:V||0===U.length,loading:W},onOk:$,title:(0,T.Y)(u.A,{id:"ZBRK9J",defaultMessage:"Export traces to datasets"}),children:(0,T.FD)("div",{css:b,children:[(0,T.FD)("div",{css:(0,n.AH)({display:"flex",gap:I.spacing.sm,alignItems:"center",marginBottom:I.spacing.sm},""),children:[(0,T.Y)(r.I,{allowClear:!0,placeholder:"Search by dataset name",value:A,onChange:e=>{F(e.target.value),e.target.value||Y(e.target.value)},onClear:()=>{F(""),Y("")},onPressEnter:()=>Y(A),componentId:"mlflow.eval-datasets.search-input",css:M,prefix:(0,T.Y)(r.S,{})}),(0,T.Y)(y.Z,{experimentId:e})]}),(0,T.FD)(i.Table,{scrollable:!0,onScroll:e=>B(e.currentTarget),someRowsSelected:O.getIsSomeRowsSelected()||O.getIsAllRowsSelected(),empty:!L&&!H&&0===P.length&&(0,T.Y)(i.Empty,{description:(0,T.Y)(u.A,{id:"F4K195",defaultMessage:"No evaluation datasets found"})}),children:[(0,T.FD)(i.TableRow,{isHeader:!0,children:[(0,T.Y)(i.TableRowSelectCell,{componentId:"mlflow.export-traces-to-dataset-modal.header-checkbox",checked:O.getIsAllRowsSelected(),indeterminate:O.getIsSomeRowsSelected(),onChange:O.getToggleAllRowsSelectedHandler()}),O.getLeafHeaders().map((e=>(0,T.Y)(i.TableHeader,{componentId:`mlflow.eval-datasets.${e.column.id}-header`,header:e,column:e.column,css:(0,n.AH)({width:e.column.columnDef.size,maxWidth:e.column.columnDef.maxSize},""),children:(0,d.Kv)(e.column.columnDef.header,e.getContext())},e.id)))]}),!q&&O.getRowModel().rows.map((e=>(0,T.FD)(i.TableRow,{children:[(0,T.Y)("div",{children:(0,T.Y)(i.TableRowSelectCell,{componentId:"mlflow.export-traces-to-dataset-modal.row-checkbox",checked:e.getIsSelected(),onChange:e.getToggleSelectedHandler()})}),e.getVisibleCells().map((e=>(0,T.Y)(i.TableCell,{css:(0,n.AH)({width:e.column.columnDef.size,maxWidth:e.column.columnDef.maxSize},""),children:(0,d.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))]},e.id))),(q||H)&&(0,T.Y)(i.TableSkeletonRows,{table:O})]})]})})},I=({experimentId:e})=>{const[a,t]=(0,s.useState)(!1),n=(0,s.useCallback)((({selectedTraceInfos:s})=>(0,T.Y)(C,{experimentId:e,visible:a,setVisible:t,selectedTraceInfos:s})),[e,a,t]);return{showExportTracesToDatasetsModal:a,setShowExportTracesToDatasetsModal:t,renderExportTracesToDatasetsModal:n}}},27042:function(e,a,t){t.d(a,{Q:function(){return T}});var s=t(68248),n=t(76118),o=t(46709),l=t(27757),r=t(79081),i=t(74060),d=t(7655),c=t(40724),u=t(884),m=t(73408);var g={name:"4zleql",styles:"display:block"};function p(e){return a=>function(e,a){const t=(0,d.A)(),{theme:r}=(0,l.u)(),c=e.props.searchValue.toLowerCase();return(0,o.useMemo)((()=>{if(!c)return e;if((0,n.sortedIndexOf)(a,c)>=0)return e;const l=/^[^,.:/=\-\s]+$/.test(c);return o.cloneElement(e,{flattenOptions:[{data:{value:c,disabled:!l,style:{color:l?r.colors.actionTertiaryTextDefault:r.colors.actionDisabledText},children:(0,m.Y)(i.LegacyTooltip,{title:l?void 0:t.formatMessage({id:"fWEvZL",defaultMessage:", . : / - = and blank spaces are not allowed"}),placement:"right",children:(0,m.FD)("span",{css:g,children:[(0,m.Y)(i.PlusIcon,{css:(0,s.AH)({marginRight:r.spacing.sm},"")}),t.formatMessage({id:"IJbauF",defaultMessage:'Add tag "{tagKey}"'},{tagKey:c})]})})},key:c,groupOption:!1},...e.props.flattenOptions]})}),[a,e,c,t,r])}(a,e)}var f={name:"1d3w5wq",styles:"width:100%"};function h({allAvailableTags:e,control:a,onKeyChangeCallback:t}){const s=(0,d.A)(),[n,l]=(0,o.useState)(!1),r=(0,o.useRef)(null),{field:c,fieldState:g}=(0,u.as)({control:a,name:"key",rules:{required:{message:s.formatMessage({id:"RlBbjb",defaultMessage:"A tag key is required"}),value:!0}}});return(0,m.Y)(i.LegacySelect,{allowClear:!0,ref:r,dangerouslySetAntdProps:{showSearch:!0,dropdownRender:p(e)},css:f,placeholder:s.formatMessage({id:"8ALhnh",defaultMessage:"Type a key"}),value:c.value,defaultValue:c.value,open:n,onDropdownVisibleChange:e=>{l(e)},filterOption:(e,a)=>null===a||void 0===a?void 0:a.value.toLowerCase().includes(e.toLowerCase()),onSelect:e=>{c.onChange(e),null===t||void 0===t||t(e)},onClear:()=>{c.onChange(void 0),null===t||void 0===t||t(void 0)},validationState:g.error?"error":void 0,children:e.map((e=>(0,m.Y)(i.LegacySelect.Option,{value:e,children:e},e)))})}var v=t(59281),y=t(77153);function w(e){return new Map(e.map((e=>[e.key,e])))}var x={name:"82a6rk",styles:"flex:1"},_={name:"82a6rk",styles:"flex:1"};const T=({onSuccess:e,saveTagsHandler:a,allAvailableTags:t,valueRequired:g=!1,title:p})=>{const f=(0,o.useRef)(),[T,k]=(0,o.useState)(""),{theme:M}=(0,l.u)(),[C,I]=(0,o.useState)(new Map),[S,Y]=(0,o.useState)(new Map),[A,F]=(0,o.useState)(!1),E=(0,u.mN)({defaultValues:{key:void 0,value:""}}),D=()=>F(!1),V=(0,o.useCallback)((e=>{f.current=e,I(w(e.tags||[])),Y(w(e.tags||[])),E.reset(),F(!0)}),[E]),R=async()=>{f.current&&(k(""),K(!0),a(f.current,Array.from(C.values()),Array.from(S.values())).then((()=>{D(),null===e||void 0===e||e(),K(!1)})).catch((e=>{var a;K(!1),k(e instanceof y.s?null===(a=e.getUserVisibleError())||void 0===a?void 0:a.message:e.message)})))},P=(0,d.A)(),L=E.watch(),[H,K]=(0,o.useState)(!1),N=(0,o.useMemo)((()=>!(0,n.isEqual)((0,n.sortBy)(Array.from(C.values()),"key"),(0,n.sortBy)(Array.from(S.values()),"key"))),[C,S]),q=L.key||L.value,B=N&&q;return{EditTagsModal:(0,m.FD)(r.d,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135",destroyOnClose:!0,visible:A,title:null!==p&&void 0!==p?p:(0,m.Y)(c.A,{id:"TBX+Gs",defaultMessage:"Add/Edit tags"}),onCancel:D,footer:(0,m.FD)(l.x,{children:[(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147",dangerouslyUseFocusPseudoClass:!0,onClick:D,css:(0,s.AH)({marginRight:N?0:M.spacing.sm},""),children:P.formatMessage({id:"2a/rR8",defaultMessage:"Cancel"})}),B?(0,m.Y)(b,{formValues:L,isLoading:H,onSaveTask:R}):(0,m.Y)(i.LegacyTooltip,{title:N?void 0:P.formatMessage({id:"16onEc",defaultMessage:"Please add or remove one or more tags before saving"}),children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174",dangerouslyUseFocusPseudoClass:!0,disabled:!N,loading:H,type:"primary",onClick:R,children:P.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})})]}),children:[(0,m.FD)("form",{onSubmit:E.handleSubmit((()=>{if(g&&!L.value.trim())return;const e=new Map(S);e.set(L.key,L),Y(e),E.reset()})),css:(0,s.AH)({display:"flex",alignItems:"flex-end",gap:M.spacing.md},""),children:[(0,m.FD)("div",{css:(0,s.AH)({minWidth:0,display:"flex",gap:M.spacing.md,flex:1},""),children:[(0,m.FD)("div",{css:x,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"key",children:P.formatMessage({id:"crTWax",defaultMessage:"Key"})}),(0,m.Y)(h,{allAvailableTags:t||[],control:E.control,onKeyChangeCallback:e=>{var a;const t=e?S.get(e):void 0;E.setValue("value",null!==(a=null===t||void 0===t?void 0:t.value)&&void 0!==a?a:"")}})]}),(0,m.FD)("div",{css:_,children:[(0,m.Y)(i.FormUI.Label,{htmlFor:"value",children:g?P.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):P.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"})}),(0,m.Y)(i.RHFControlledComponents.Input,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223",name:"value",control:E.control,"aria-label":g?P.formatMessage({id:"tHrp+A",defaultMessage:"Value"}):P.formatMessage({id:"4B8k46",defaultMessage:"Value (optional)"}),placeholder:P.formatMessage({id:"FFe+Ug",defaultMessage:"Type a value"})})]})]}),(0,m.Y)(i.LegacyTooltip,{title:P.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248",htmlType:"submit","aria-label":P.formatMessage({id:"tx3aAM",defaultMessage:"Add tag"}),children:(0,m.Y)(i.PlusIcon,{})})})]}),T&&(0,m.Y)(i.FormUI.Message,{type:"error",message:T}),(0,m.Y)("div",{css:(0,s.AH)({display:"flex",rowGap:M.spacing.xs,flexWrap:"wrap",marginTop:M.spacing.sm},""),children:Array.from(S.values()).map((e=>(0,m.Y)(v.t,{isClosable:!0,tag:e,onClose:()=>(({key:e})=>{Y((a=>(a.delete(e),new Map(a))))})(e)},e.key)))})]}),showEditTagsModal:V,isLoading:H}};var k={name:"1y0ex1",styles:"max-width:400px"};function b({isLoading:e,formValues:a,onSaveTask:t}){const o=(0,d.A)(),{theme:r}=(0,l.u)(),i=`${`${(0,n.truncate)(a.key,{length:20})||"_"}`}${a.value?`:${(0,n.truncate)(a.value,{length:20})}`:""}`,c=o.formatMessage({id:"wcSVYI",defaultMessage:'Are you sure you want to save and close without adding "{tag}"'},{tag:i});return(0,m.FD)(l.aw.Root,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309",children:[(0,m.Y)(l.aw.Trigger,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306",dangerouslyUseFocusPseudoClass:!0,loading:e,type:"primary",children:o.formatMessage({id:"801Xh4",defaultMessage:"Save tags"})})}),(0,m.FD)(l.aw.Content,{align:"end","aria-label":c,children:[(0,m.Y)(l.T.Paragraph,{css:k,children:c}),(0,m.Y)(l.aw.Close,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316",onClick:t,children:o.formatMessage({id:"mv6CY3",defaultMessage:"Yes, save and close"})})}),(0,m.Y)(l.aw.Close,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324",type:"primary",css:(0,s.AH)({marginLeft:r.spacing.sm},""),children:o.formatMessage({id:"geizp1",defaultMessage:"Cancel"})})}),(0,m.Y)(l.aw.Arrow,{})]})]})}},32874:function(e,a,t){t.d(a,{Z:function(){return v}});var s=t(27757),n=t(74060),o=t(46709),l=t(40724),r=t(79081),i=t(66916),d=t(42747),c=t(61077),u=t(39595),m=t(61060),g=t(34599);var p=t(73408);const f=({visible:e,experimentId:a,onCancel:t})=>{const s=(0,d.tz)(),[l,f]=(0,o.useState)(""),[h,v]=(0,o.useState)(""),{createEvaluationDatasetMutation:y,isLoading:w}=(({onSuccess:e,onError:a})=>{const t=(0,u.jE)(),{mutate:s,isLoading:n}=(0,m.n)({mutationFn:async({datasetName:e,experimentIds:a})=>{const t={name:e,experiment_ids:a};return(await(0,c.ff)((0,c.we)("ajax-api/3.0/mlflow/datasets/create"),"POST",t)).dataset},onSuccess:()=>{t.invalidateQueries({queryKey:[g.P4]}),null===e||void 0===e||e()},onError:e=>{null===a||void 0===a||a(e)}});return{createEvaluationDatasetMutation:s,isLoading:n}})({onSuccess:()=>{t()}}),x=(0,o.useCallback)((()=>{l?y({datasetName:l,experimentIds:[a]}):v(s.formatMessage({id:"sbHChH",defaultMessage:"Dataset name is required"}))}),[y,a,l,s]);return(0,p.FD)(r.d,{componentId:"mlflow.create-evaluation-dataset-modal",visible:e,onCancel:t,okText:s.formatMessage({id:"creoEe",defaultMessage:"Create"}),cancelText:s.formatMessage({id:"nEnDEu",defaultMessage:"Cancel"}),onOk:x,okButtonProps:{loading:w,disabled:!l},title:(0,p.Y)(d.sA,{id:"287Ack",defaultMessage:"Create evaluation dataset"}),children:[(0,p.Y)(n.FormUI.Label,{htmlFor:"dataset-name-input",children:(0,p.Y)(d.sA,{id:"xdFMIN",defaultMessage:"Dataset name"})}),(0,p.Y)(i.I,{componentId:"mlflow.create-evaluation-dataset-modal.dataset-name",id:"dataset-name-input",name:"name",type:"text",placeholder:s.formatMessage({id:"ZQpc2w",defaultMessage:"Enter dataset name"}),value:l,onChange:e=>{f(e.target.value),v("")}}),h&&(0,p.Y)(n.FormUI.Message,{type:"error",message:h})]})};var h={name:"b9l38d",styles:"width:min-content"};const v=({experimentId:e})=>{const[a,t]=(0,o.useState)(!1);return(0,p.FD)(p.FK,{children:[(0,p.Y)(s.B,{componentId:"mlflow.eval-datasets.create-dataset-button",css:h,icon:(0,p.Y)(n.DatabaseIcon,{}),onClick:()=>t(!0),children:(0,p.Y)(l.A,{id:"N7BCue",defaultMessage:"Create dataset"})}),(0,p.Y)(f,{experimentId:e,visible:a,onCancel:()=>t(!1)})]})}},33656:function(e,a,t){t.d(a,{N9:function(){return m},NW:function(){return c},OT:function(){return i},Yc:function(){return u}});var s=t(46709),n=t(22141),o=t.n(n),l=t(76251);let r=null;const i=()=>r||(r=new l.Converter,r.setFlavor("github"),r),d={allowedTags:["h1","h2","h3","h4","h5","h6","h7","h8","blockquote","p","a","ul","ol","nl","li","ins","b","i","strong","em","strike","code","hr","br","div","table","thead","tbody","tr","th","td","pre","del","sup","sub","dl","dt","dd","kbd","q","samp","samp","var","hr","rt","rp","summary","iframe","img","caption","figure"],allowedAttributes:{a:["href","name","target"],img:["src","longdesc"],div:["itemscope","itemtype"]}},c=e=>o()(e,d),u=e=>e.replace(new RegExp("<a","g"),'<a target="_blank"'),m=()=>(0,s.useCallback)((e=>{const a=i().makeHtml(e);return c(a)}),[])},34599:function(e,a,t){t.d(a,{P4:function(){return n},lA:function(){return o},uz:function(){return s}});const s="GET_DATASET_RECORDS",n="SEARCH_EVALUATION_DATASETS",o="FETCH_TRACES"},40720:function(e,a,t){t.d(a,{C:function(){return r}});var s=t(39595),n=t(61060),o=t(12803),l=t(83887);const r=()=>{const e=(0,s.jE)();return(0,n.n)({mutationFn:async({experimentId:e,traceRequestIds:a})=>{const t=[];for(let n=0;n<a.length;n+=100)t.push(a.slice(n,n+100));const s=t.map((a=>o.x.deleteTracesV3(e,a)));return{traces_deleted:(await Promise.all(s)).reduce(((e,a)=>e+a.traces_deleted),0)}},onSuccess:()=>(0,l.BL)({queryClient:e})})}},52849:function(e,a,t){t.d(a,{v:function(){return n}});var s=t(46709);const n=({isFetching:e,hasNextPage:a,fetchNextPage:t})=>(0,s.useCallback)((s=>{if(s){const{scrollHeight:n,scrollTop:o,clientHeight:l}=s;n-o-l<200&&!e&&a&&t()}}),[t,e,a])},59281:function(e,a,t){t.d(a,{t:function(){return h}});var s=t(68248),n=t(74060),o=t(27757),l=t(46709),r=t(7655),i=t(79081),d=t(91701),c=t(73408);const{Paragraph:u}=o.T;var m={name:"zjik7",styles:"display:flex"},g={name:"1ff36h2",styles:"flex-grow:1"};const p=l.memo((e=>{const{theme:a}=(0,o.u)();return(0,c.Y)(i.d,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17",title:"Tag: "+e.tagKey,visible:e.isKeyValueTagFullViewModalVisible,onCancel:()=>e.setIsKeyValueTagFullViewModalVisible(!1),children:(0,c.FD)("div",{css:m,children:[(0,c.Y)(u,{css:g,children:(0,c.Y)("pre",{css:(0,s.AH)({backgroundColor:a.colors.backgroundPrimary,marginTop:a.spacing.sm,whiteSpace:"pre-wrap",wordBreak:"break-all"},""),children:e.tagValue})}),(0,c.Y)("div",{css:(0,s.AH)({marginTop:a.spacing.sm},""),children:(0,c.Y)(d.i,{copyText:e.tagValue,showLabel:!1,icon:(0,c.Y)(n.CopyIcon,{}),"aria-label":"Copy"})})]})})}));function f(e=!0){return e?{overflow:"hidden",textOverflow:"ellipsis",textWrap:"nowrap",whiteSpace:"nowrap"}:{whiteSpace:"nowrap"}}const h=({isClosable:e=!1,onClose:a,tag:t,enableFullViewModal:i=!1,charLimit:d=30,maxWidth:u=300,className:m})=>{const g=(0,r.A)(),[h,v]=(0,l.useState)(!1),{shouldTruncateKey:y,shouldTruncateValue:w}=function(e,a=30){const{key:t,value:s}=e,n=t.length+s.length,o=t.length>s.length,l=o?s.length:t.length;return n<=a?{shouldTruncateKey:!1,shouldTruncateValue:!1}:l>a/2?{shouldTruncateKey:!0,shouldTruncateValue:!0}:{shouldTruncateKey:o,shouldTruncateValue:!o}}(t,d),x=i&&(y||w),_=g.formatMessage({id:"ZXUtU8",defaultMessage:"Click to see more"});return(0,c.FD)("div",{children:[(0,c.Y)(n.Tag,{componentId:"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60",closable:e,onClose:a,title:t.key,className:m,children:(0,c.Y)(n.LegacyTooltip,{title:x?_:"",children:(0,c.FD)("span",{css:(0,s.AH)({maxWidth:u,display:"inline-flex"},""),onClick:()=>x?v(!0):void 0,children:[(0,c.Y)(o.T.Text,{bold:!0,title:t.key,css:f(y),children:t.key}),t.value&&(0,c.FD)(o.T.Text,{title:t.value,css:f(w),children:[": ",t.value]})]})})}),(0,c.Y)("div",{children:h&&(0,c.Y)(p,{tagKey:t.key,tagValue:t.value,isKeyValueTagFullViewModalVisible:h,setIsKeyValueTagFullViewModalVisible:v})})]})}},69986:function(e,a,t){t.d(a,{R:function(){return o},U:function(){return n}});var s=t(12803);async function n(e){var a;if(!e)return;const[t,n]=await Promise.all([s.x.getExperimentTraceInfoV3(e),s.x.getExperimentTraceData(e)]);return n?{info:(null===t||void 0===t||null===(a=t.trace)||void 0===a?void 0:a.trace_info)||{},data:n}:void 0}async function o(e){if(!e)return;const[a,t]=await Promise.all([s.x.getExperimentTraceInfo(e).then((e=>e.trace_info||{})),s.x.getExperimentTraceData(e)]);return t?{info:a,data:t}:void 0}},72607:function(e,a,t){t.d(a,{J:function(){return r}});var s=t(96584),n=t(61077),o=t(46709),l=t(34599);const r=({experimentId:e,enabled:a=!0,nameFilter:t=""})=>{const{data:r,fetchNextPage:i,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:g}=(0,s.q)({queryKey:[l.P4,e,t],queryFn:async({queryKey:[,e,a],pageParam:t})=>{const s={experiment_ids:[e],filter_string:a?`name ILIKE '%${a}%'`:void 0,order_by:["created_time DESC"],max_results:50,page_token:t};return await(0,n.ff)((0,n.we)("ajax-api/3.0/mlflow/datasets/search"),"POST",s)},cacheTime:0,refetchOnWindowFocus:!1,retry:!1,enabled:a,getNextPageParam:e=>e.next_page_token});return{data:(0,o.useMemo)((()=>{var e;return null!==(e=null===r||void 0===r?void 0:r.pages.flatMap((e=>{var a;return null!==(a=e.datasets)&&void 0!==a?a:[]})))&&void 0!==e?e:[]}),[r]),fetchNextPage:i,hasNextPage:d,isLoading:c,isFetching:u,refetch:m,error:g}}},82636:function(e,a,t){t.d(a,{l:function(){return n}});var s=t(83887);const n=e=>{let a=!1,t=!1,n=!1;for(const r of e){var o,l;const e=r.traceInfo;e&&((0,s.h)(e)&&(t=!0),(0,s.Mq)(e)&&(a=!0),null!==(o=r.traceInfo)&&void 0!==o&&null!==(l=o.trace_metadata)&&void 0!==l&&l["mlflow.trace.tokenUsage"]&&(n=!0))}return{responseHasContent:a,inputHasContent:t,tokensHasContent:n}}},88525:function(e,a,t){t.d(a,{$:function(){return r}});var s=t(27042),n=t(12803),o=t(46709),l=t(181);const r=({onSuccess:e,existingTagKeys:a=[]})=>{const{showEditTagsModal:t,EditTagsModal:r}=(0,s.Q)({saveTagsHandler:async(e,a,t)=>{if(!e.traceRequestId)return;const s=e.traceRequestId,o=t.filter((({key:e,value:t})=>!a.some((({key:a,value:s})=>a===e&&t===s)))),l=a.filter((({key:e})=>!t.some((({key:a})=>e===a))));return Promise.all([...o.map((({key:e,value:a})=>n.x.setExperimentTraceTagV3(s,e,a))),...l.map((({key:e})=>n.x.deleteExperimentTraceTagV3(s,e)))])},valueRequired:!0,allAvailableTags:a.filter((e=>e&&!e.startsWith(l.nt))),onSuccess:e});return{showEditTagsModalForTrace:(0,o.useCallback)((e=>{var a;if(!e.trace_id)return;const s=Object.entries(null!==(a=e.tags)&&void 0!==a?a:{}).map((([e,a])=>({key:e,value:a}))).filter((({key:e})=>e&&!e.startsWith(l.nt)))||[];t({traceRequestId:e.trace_id,tags:s||[]})}),[t]),EditTagsModal:r}}},91701:function(e,a,t){t.d(a,{i:function(){return d}});var s=t(46709),n=t(40724),o=t(74060),l=t(27757),r=t(73408);var i={name:"1739oy8",styles:"z-index:1"};const d=({copyText:e,showLabel:a=!0,componentId:t,...d})=>{const[c,u]=(0,s.useState)(!1);return(0,r.Y)(o.LegacyTooltip,{title:(0,r.Y)(n.A,{id:"X+boXI",defaultMessage:"Copied"}),dangerouslySetAntdProps:{visible:c},children:(0,r.Y)(l.B,{componentId:null!==t&&void 0!==t?t:"mlflow.shared.copy_button",type:"primary",onClick:()=>{navigator.clipboard.writeText(e),u(!0),setTimeout((()=>{u(!1)}),3e3)},onMouseLeave:()=>{u(!1)},css:i,children:a?(0,r.Y)(n.A,{id:"1Iq+NW",defaultMessage:"Copy"}):void 0,...d})})}}}]);